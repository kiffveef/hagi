# hagié–‹ç™ºã‚¬ã‚¤ãƒ‰

hagiã¸ã®è²¢çŒ®æ–¹æ³•ã¨é–‹ç™ºç’°å¢ƒã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ–¹æ³•ã§ã™ã€‚

---

## é–‹ç™ºç’°å¢ƒã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### å‰ææ¡ä»¶

- Rust 1.80ä»¥é™
- Git
- Node.js v18ä»¥é™(MCPãƒ†ã‚¹ãƒˆç”¨)
- uv(Python package managerã€MCPãƒ†ã‚¹ãƒˆç”¨)

### ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³

```bash
git clone https://github.com/kiffveef/hagi.git
cd hagi
```

### ãƒ“ãƒ«ãƒ‰

```bash
cargo build
```

### ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

```bash
# ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ
cargo test

# çµ±åˆãƒ†ã‚¹ãƒˆ(å®Ÿéš›ã«ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œ)
cargo run -- --help
cargo run -- install --dry-run
```

---

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
hagi/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.rs              # ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆã€CLIå®šç¾©
â”‚   â”œâ”€â”€ utils.rs             # å…±é€šãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°
â”‚   â”œâ”€â”€ templates.rs         # ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆåŸ‹ã‚è¾¼ã¿æ©Ÿèƒ½
â”‚   â””â”€â”€ commands/            # ã‚³ãƒãƒ³ãƒ‰å®Ÿè£…
â”‚       â”œâ”€â”€ mod.rs           # ã‚³ãƒãƒ³ãƒ‰ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å®šç¾©
â”‚       â”œâ”€â”€ install.rs       # install ã‚³ãƒãƒ³ãƒ‰
â”‚       â”œâ”€â”€ uninstall.rs     # uninstall ã‚³ãƒãƒ³ãƒ‰
â”‚       â”œâ”€â”€ status.rs        # status ã‚³ãƒãƒ³ãƒ‰
â”‚       â”œâ”€â”€ mcp.rs           # mcp ã‚³ãƒãƒ³ãƒ‰
â”‚       â”œâ”€â”€ config.rs        # config ã‚³ãƒãƒ³ãƒ‰
â”‚       â””â”€â”€ update.rs        # update ã‚³ãƒãƒ³ãƒ‰
â”œâ”€â”€ templates/.claude/       # ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«(åŸ‹ã‚è¾¼ã¿å¯¾è±¡)
â”‚   â”œâ”€â”€ mcp.json             # MCPè¨­å®šãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
â”‚   â”œâ”€â”€ settings.local.json  # ãƒ‘ãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³è¨­å®š
â”‚   â”œâ”€â”€ CLAUDE.md            # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³
â”‚   â”œâ”€â”€ instructions/        # è©³ç´°ã‚¤ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚·ãƒ§ãƒ³
â”‚   â””â”€â”€ commands/            # ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ã‚³ãƒãƒ³ãƒ‰
â”œâ”€â”€ docs/                    # ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â”œâ”€â”€ Cargo.toml               # Rustä¾å­˜é–¢ä¿‚
â””â”€â”€ README.md                # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦
```

---

## é–‹ç™ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

### 1. ãƒ–ãƒ©ãƒ³ãƒæˆ¦ç•¥

**mainãƒ–ãƒ©ãƒ³ãƒ:**
- å®‰å®šç‰ˆã®ã‚³ãƒ¼ãƒ‰ã®ã¿
- ãƒªãƒªãƒ¼ã‚¹å¯èƒ½ãªçŠ¶æ…‹ã‚’ç¶­æŒ

**æ©Ÿèƒ½ãƒ–ãƒ©ãƒ³ãƒ:**
- æ–°æ©Ÿèƒ½ã€ãƒã‚°ä¿®æ­£ã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°ç”¨
- å‘½åè¦å‰‡:
  - `feature/<name>` - æ–°æ©Ÿèƒ½
  - `fix/<name>` - ãƒã‚°ä¿®æ­£
  - `docs/<name>` - ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°
  - `refactor/<name>` - ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°

**ä¾‹:**
```bash
git checkout -b feature/add-clean-command
# å®Ÿè£…
git add .
git commit -m "âœ¨ Add clean command"
git checkout main
git merge feature/add-clean-command
```

### 2. ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¦ç´„

**å½¢å¼:**
```
<ã‚¢ã‚¤ã‚³ãƒ³> <è‹±èªã®è¦ç´„>(50æ–‡å­—ä»¥å†…)

- æ—¥æœ¬èªã®ç®‡æ¡æ›¸ã
- å¤‰æ›´å†…å®¹ã‚’ç°¡æ½”ã«è¨˜è¿°
```

**ã‚¢ã‚¤ã‚³ãƒ³:**
- ğŸŒ± `first` - Initial commit
- âœ¨ `add` - æ–°æ©Ÿèƒ½è¿½åŠ 
- ğŸ”„ `update` - æ—¢å­˜æ©Ÿèƒ½æ›´æ–°
- ğŸ› `fix` - ãƒã‚°ä¿®æ­£
- ğŸ“ `docs` - ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- â™»ï¸ `refactor` - ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°
- ğŸ§ª `test` - ãƒ†ã‚¹ãƒˆè¿½åŠ ãƒ»æ›´æ–°
- ğŸ”§ `config` - è¨­å®šå¤‰æ›´

**ä¾‹:**
```
âœ¨ Add MCP management commands

- hagi mcp list/info/enable/disable ã‚’å®Ÿè£…
- è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã¨ä¸–ä»£ç®¡ç†ã‚’çµ±åˆ
- docs/commands.md ã‚’æ›´æ–°
```

### 3. ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„

**Rustã‚¹ã‚¿ã‚¤ãƒ«:**
- `cargo fmt` ã§ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
- `cargo clippy` ã§ãƒªãƒ³ãƒˆ
- `anyhow::Result` ã§ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- snake_case (é–¢æ•°ã€å¤‰æ•°)
- PascalCase (å‹ã€ãƒˆãƒ¬ã‚¤ãƒˆ)

**ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ:**
- æ–°ã—ã„ã‚³ãƒãƒ³ãƒ‰ã¯ `src/commands/` ã«è¿½åŠ 
- å…±é€šãƒ­ã‚¸ãƒƒã‚¯ã¯ `src/utils.rs` ã«è¿½åŠ 
- ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¯ `templates/.claude/` ã«é…ç½®

---

## æ–°æ©Ÿèƒ½ã®è¿½åŠ 

### ä¾‹: æ–°ã—ã„ã‚³ãƒãƒ³ãƒ‰ã‚’è¿½åŠ 

**1. ã‚³ãƒãƒ³ãƒ‰å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ**

`src/commands/newcommand.rs`:
```rust
use anyhow::Result;
use colored::*;

pub fn newcommand() -> Result<()> {
    println!("{}", "New command executed!".green());
    Ok(())
}
```

**2. mod.rsã«è¿½åŠ **

`src/commands/mod.rs`:
```rust
pub mod newcommand;
```

**3. main.rsã«å®šç¾©è¿½åŠ **

`src/main.rs`:
```rust
#[derive(Subcommand)]
enum Commands {
    // ... æ—¢å­˜ã®ã‚³ãƒãƒ³ãƒ‰

    /// New command description
    NewCommand,
}

// matchæ–‡ã«è¿½åŠ 
Commands::NewCommand => {
    commands::newcommand::newcommand()?;
}
```

**4. ãƒ†ã‚¹ãƒˆ**

```bash
cargo run -- newcommand
```

**5. ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°**

- `docs/commands.md` ã«èª¬æ˜è¿½åŠ 
- `README.md` ã®ã‚³ãƒãƒ³ãƒ‰ä¸€è¦§ã«è¿½åŠ 

---

## ãƒ†ã‚¹ãƒˆ

### æ‰‹å‹•ãƒ†ã‚¹ãƒˆ

```bash
# ãƒ“ãƒ«ãƒ‰
cargo build

# ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ†ã‚¹ãƒˆ(ãƒ‰ãƒ©ã‚¤ãƒ©ãƒ³)
cargo run -- install -g --dry-run

# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ†ã‚¹ãƒˆ
cd /tmp/test-project
cargo run -- install --dry-run

# MCPã‚³ãƒãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆ
cargo run -- mcp list
cargo run -- mcp info context7

# è¨­å®šã‚³ãƒãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆ
cargo run -- config validate mcp
```

---

## ãƒãƒ¼ã‚¸ãƒ§ãƒ³æ›´æ–°

```bash
# 1. Cargo.tomlã®versionã‚’æ›´æ–°
# 2. ã‚¿ã‚°ä½œæˆ
git tag -a v0.2.1 -m "v0.2.1"
git push origin v0.2.1
```

---

## ã‚ˆãã‚ã‚‹é–‹ç™ºã‚¿ã‚¹ã‚¯

### ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®è¿½åŠ 

1. `templates/.claude/` ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¿½åŠ 
2. `cargo build` ã§è‡ªå‹•çš„ã«åŸ‹ã‚è¾¼ã¾ã‚Œã‚‹
3. ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

### æ–°ã—ã„MCPã‚µãƒ¼ãƒãƒ¼ã®è¿½åŠ 

1. `templates/.claude/mcp.json` ã«ã‚¨ãƒ³ãƒˆãƒªè¿½åŠ 
2. `src/commands/mcp.rs` ã® `get_server_description` é–¢æ•°ã«èª¬æ˜è¿½åŠ 
3. `docs/mcp-setup.md` ã«ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †è¿½åŠ 

### å…±é€šãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã®è¿½åŠ 

1. `src/utils.rs` ã«é–¢æ•°è¿½åŠ 
2. æ—¢å­˜ã®ã‚³ãƒãƒ³ãƒ‰ã§ä½¿ç”¨ä¾‹ã‚’ç¢ºèª

---

## ãƒ‡ãƒãƒƒã‚°

### ãƒ­ã‚°å‡ºåŠ›

```rust
use colored::*;

println!("{}", "Debug: value = {}".yellow(), value);
eprintln!("{}", "Error: {}".red(), error);
```

### cargo run ã§ã®å®Ÿè¡Œ

```bash
# è©³ç´°ãªã‚¨ãƒ©ãƒ¼è¡¨ç¤º
RUST_BACKTRACE=1 cargo run -- install -g

# ãƒªãƒªãƒ¼ã‚¹ãƒ“ãƒ«ãƒ‰ã§å®Ÿè¡Œ
cargo run --release -- install -g
```

---

## é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- **[README](../README.md)**: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦
- **[ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚¬ã‚¤ãƒ‰](./installation.md)**: ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•
- **[ã‚³ãƒãƒ³ãƒ‰ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹](./commands.md)**: å…¨ã‚³ãƒãƒ³ãƒ‰ã®è©³ç´°
- **[ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°](./troubleshooting.md)**: ã‚ˆãã‚ã‚‹å•é¡Œã¨è§£æ±ºç­–
